{
  "summary": {
    "total_config_usages": 110,
    "files_with_config": 24,
    "unique_config_keys": 40,
    "analysis_timestamp": "/Users/seanzhang/seanrework/anp-open-sdk"
  },
  "detailed_usages": [
    {
      "file": "data_user/localhost_9527/agents_config/agent_llm/agent_handlers.py",
      "line": 34,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    print(f\"  -> Self-created agent instance: {my_agent_instance.name}\")",
        "",
        "    # 3. ÂàõÂª∫Âπ∂Â≠òÂÇ®LLMÂÆ¢Êà∑Á´Ø‰Ωú‰∏∫Ê®°ÂùóÁ∫ßÂèòÈáè",
        "    config = get_global_config()",
        "    api_key = config.secrets.openai_api_key",
        "    base_url = config.llm.api_url",
        ""
      ],
      "function": "initialize_agent",
      "class": "unknown"
    },
    {
      "file": "data_user/localhost_9527/agents_config/agent_llm/agent_handlers.py",
      "line": 35,
      "type": "config_access",
      "config_key": "secrets.openai_api_key",
      "code": "api_key = config.secrets.openai_api_key",
      "context": [
        "",
        "    # 3. ÂàõÂª∫Âπ∂Â≠òÂÇ®LLMÂÆ¢Êà∑Á´Ø‰Ωú‰∏∫Ê®°ÂùóÁ∫ßÂèòÈáè",
        "    config = get_global_config()",
        "    api_key = config.secrets.openai_api_key",
        "    base_url = config.llm.api_url",
        "",
        "    my_llm_client = AsyncOpenAI(api_key=api_key, base_url=base_url)"
      ],
      "function": "initialize_agent",
      "class": "unknown"
    },
    {
      "file": "data_user/localhost_9527/agents_config/agent_llm/agent_handlers.py",
      "line": 36,
      "type": "config_access",
      "config_key": "llm.api_url",
      "code": "base_url = config.llm.api_url",
      "context": [
        "    # 3. ÂàõÂª∫Âπ∂Â≠òÂÇ®LLMÂÆ¢Êà∑Á´Ø‰Ωú‰∏∫Ê®°ÂùóÁ∫ßÂèòÈáè",
        "    config = get_global_config()",
        "    api_key = config.secrets.openai_api_key",
        "    base_url = config.llm.api_url",
        "",
        "    my_llm_client = AsyncOpenAI(api_key=api_key, base_url=base_url)",
        "    print(f\"  -> Self-created LLM client.\")"
      ],
      "function": "initialize_agent",
      "class": "unknown"
    },
    {
      "file": "data_user/localhost_9527/agents_config/orchestrator_agent/agent_handlers.py",
      "line": 251,
      "type": "config_access",
      "config_key": "agent_002.agent_register",
      "code": "\"data_user.localhost_9527.agents_config.agent_002.agent_register::calculate_sum\",",
      "context": [
        "",
        "        # ÊñπÂºè2ÔºöÈÄöËøáÊñπÊ≥ïÈîÆÁõ¥Êé•Ë∞ÉÁî®",
        "        result2 = await caller.call_method_by_key(",
        "            \"data_user.localhost_9527.agents_config.agent_002.agent_register::calculate_sum\",",
        "            10.5, 20.3",
        "        )",
        "        logger.info(f\"Áõ¥Êé•Ë∞ÉÁî®ÁªìÊûú: {result2}\")"
      ],
      "function": "run_agent_002_demo_new",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 583,
      "type": "config_access",
      "config_key": "get",
      "code": "path_mappings = config.get('path_mappings', {})",
      "context": [
        "            return None, None",
        "",
        "        config = self.shared_did_registry[shared_did]",
        "        path_mappings = config.get('path_mappings', {})",
        "",
        "        # Á≤æÁ°ÆÂåπÈÖç",
        "        if api_path in path_mappings:"
      ],
      "function": "_resolve_shared_did",
      "class": "AgentRouter"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 847,
      "type": "config_access",
      "config_key": "get",
      "code": "if share_config.get('enabled'):",
      "context": [
        "        # Ê£ÄÊü•ÂÖ±‰∫´DIDÈÖçÁΩÆ",
        "        share_did_config = None",
        "        share_config = cfg.get('share_did', {})",
        "        if share_config.get('enabled'):",
        "            share_did_config = {",
        "                'shared_did': share_config['shared_did'],",
        "                'path_prefix': share_config.get('path_prefix', ''),"
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 850,
      "type": "config_access",
      "config_key": "get",
      "code": "'path_prefix': share_config.get('path_prefix', ''),",
      "context": [
        "        if share_config.get('enabled'):",
        "            share_did_config = {",
        "                'shared_did': share_config['shared_did'],",
        "                'path_prefix': share_config.get('path_prefix', ''),",
        "                'primary_agent': share_config.get('primary_agent', False),  # ÈªòËÆ§‰∏∫ÂâØAgent",
        "                'api_paths': [api['path'] for api in cfg.get('api', [])]",
        "            }"
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 851,
      "type": "config_access",
      "config_key": "get",
      "code": "'primary_agent': share_config.get('primary_agent', False),  # ÈªòËÆ§‰∏∫ÂâØAgent",
      "context": [
        "            share_did_config = {",
        "                'shared_did': share_config['shared_did'],",
        "                'path_prefix': share_config.get('path_prefix', ''),",
        "                'primary_agent': share_config.get('primary_agent', False),  # ÈªòËÆ§‰∏∫ÂâØAgent",
        "                'api_paths': [api['path'] for api in cfg.get('api', [])]",
        "            }",
        "            logger.debug(f\"  -> Ê£ÄÊµãÂà∞ÂÖ±‰∫´DIDÈÖçÁΩÆ: {share_did_config}\")"
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 874,
      "type": "config_access",
      "config_key": "get",
      "code": "if not share_did_config.get('path_prefix'):",
      "context": [
        "        # ÂàõÂª∫Êñ∞ÁöÑAgentÂÆû‰æã - ÂÖ®Èù¢‰ΩøÁî®Êñ∞AgentÁ≥ªÁªü",
        "        if share_did_config:",
        "            # Á°Æ‰øùÂÖ±‰∫´DIDÈÖçÁΩÆÂÆåÊï¥",
        "            if not share_did_config.get('path_prefix'):",
        "                raise ValueError(f\"‚ùå ÂÖ±‰∫´DIDÈÖçÁΩÆÁº∫Â∞ë path_prefix: {base_module_name}\")",
        "",
        "            anp_agent = AgentManager.create_agent("
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 880,
      "type": "config_access",
      "config_key": "get",
      "code": "prefix=share_did_config.get('path_prefix', ''),",
      "context": [
        "            anp_agent = AgentManager.create_agent(",
        "                anp_user_did,  cfg['name'],",
        "                shared=True,",
        "                prefix=share_did_config.get('path_prefix', ''),",
        "                primary_agent=share_did_config.get('primary_agent', False)",
        "            )",
        "        else:"
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 881,
      "type": "config_access",
      "config_key": "get",
      "code": "primary_agent=share_did_config.get('primary_agent', False)",
      "context": [
        "                anp_user_did,  cfg['name'],",
        "                shared=True,",
        "                prefix=share_did_config.get('path_prefix', ''),",
        "                primary_agent=share_did_config.get('primary_agent', False)",
        "            )",
        "        else:",
        "            anp_agent = AgentManager.create_agent(anp_user_did, cfg['name'], shared=False)"
      ],
      "function": "load_agent_from_module",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
      "line": 937,
      "type": "config_access",
      "config_key": "get",
      "code": "is_primary = share_did_config.get('primary_agent', False)",
      "context": [
        "        # Ê£ÄÊü•ÊòØÂê¶ÊòØÂÖ±‰∫´DIDÊ®°Âºè‰ΩÜ‰∏çÊòØ‰∏ªAgent",
        "        is_shared_non_primary = False",
        "        if share_did_config:  # Âè™Ê£ÄÊü•share_did_configÊòØÂê¶Â≠òÂú®",
        "            is_primary = share_did_config.get('primary_agent', False)",
        "            if not is_primary:",
        "                is_shared_non_primary = True",
        "                logger.info(f\"‚ÑπÔ∏è Ê≥®ÊÑè: {cfg.get('name')} ÊòØÂÖ±‰∫´DIDÁöÑÈùû‰∏ªAgentÔºåÂ∞ÜË∑≥ËøáÊ∂àÊÅØÂ§ÑÁêÜÂô®Ê≥®ÂÜå (ËøôÊòØÈ¢ÑÊúüË°å‰∏∫)\")"
      ],
      "function": "_register_message_handlers_new",
      "class": "LocalAgentManager"
    },
    {
      "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
      "line": 61,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "",
        "        self.logger = logger",
        "        self.initialized = True",
        "        config = get_global_config()",
        "        self.debug_mode = config.anp_sdk.debug_mode",
        "        if self.debug_mode:",
        "            self.app = FastAPI("
      ],
      "function": "__init__",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
      "line": 117,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        from anp_foundation.config import get_global_config",
        "",
        "        # 2. ‰øÆÊ≠£ÈÖçÁΩÆÈ°πÁöÑÂêçÁß∞",
        "        config = get_global_config()",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host",
        ""
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
      "line": 62,
      "type": "config_access",
      "config_key": "anp_sdk.debug_mode",
      "code": "self.debug_mode = config.anp_sdk.debug_mode",
      "context": [
        "        self.logger = logger",
        "        self.initialized = True",
        "        config = get_global_config()",
        "        self.debug_mode = config.anp_sdk.debug_mode",
        "        if self.debug_mode:",
        "            self.app = FastAPI(",
        "                title=\"ANP DID Server in DebugMode\","
      ],
      "function": "__init__",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
      "line": 118,
      "type": "config_access",
      "config_key": "anp_sdk.port",
      "code": "port = config.anp_sdk.port",
      "context": [
        "",
        "        # 2. ‰øÆÊ≠£ÈÖçÁΩÆÈ°πÁöÑÂêçÁß∞",
        "        config = get_global_config()",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host",
        "",
        "        app_instance = self.app"
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
      "line": 119,
      "type": "config_access",
      "config_key": "anp_sdk.host",
      "code": "host = config.anp_sdk.host",
      "context": [
        "        # 2. ‰øÆÊ≠£ÈÖçÁΩÆÈ°πÁöÑÂêçÁß∞",
        "        config = get_global_config()",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host",
        "",
        "        app_instance = self.app",
        ""
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
      "line": 56,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "",
        "        self.logger = logger",
        "        self.initialized = True",
        "        config = get_global_config()",
        "        self.debug_mode = config.anp_sdk.debug_mode",
        "",
        ""
      ],
      "function": "__init__",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
      "line": 116,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        from anp_foundation.config import get_global_config",
        "",
        "        # 2. ‰øÆÊ≠£ÈÖçÁΩÆÈ°πÁöÑÂêçÁß∞",
        "        config = get_global_config()",
        "",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host"
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
      "line": 57,
      "type": "config_access",
      "config_key": "anp_sdk.debug_mode",
      "code": "self.debug_mode = config.anp_sdk.debug_mode",
      "context": [
        "        self.logger = logger",
        "        self.initialized = True",
        "        config = get_global_config()",
        "        self.debug_mode = config.anp_sdk.debug_mode",
        "",
        "",
        "        if self.debug_mode:"
      ],
      "function": "__init__",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
      "line": 118,
      "type": "config_access",
      "config_key": "anp_sdk.port",
      "code": "port = config.anp_sdk.port",
      "context": [
        "        # 2. ‰øÆÊ≠£ÈÖçÁΩÆÈ°πÁöÑÂêçÁß∞",
        "        config = get_global_config()",
        "",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host",
        "",
        "        app_instance = self.app"
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
      "line": 119,
      "type": "config_access",
      "config_key": "anp_sdk.host",
      "code": "host = config.anp_sdk.host",
      "context": [
        "        config = get_global_config()",
        "",
        "        port = config.anp_sdk.port",
        "        host = config.anp_sdk.host",
        "",
        "        app_instance = self.app",
        ""
      ],
      "function": "start_server",
      "class": "ANP_Server"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/auth_exempt_handler.py",
      "line": 5,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "",
        "from anp_foundation.config import get_global_config",
        "",
        "config = get_global_config()",
        "EXEMPT_PATHS = config.auth_middleware.exempt_paths",
        "",
        ""
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/auth_exempt_handler.py",
      "line": 6,
      "type": "config_access",
      "config_key": "auth_middleware.exempt_paths",
      "code": "EXEMPT_PATHS = config.auth_middleware.exempt_paths",
      "context": [
        "from anp_foundation.config import get_global_config",
        "",
        "config = get_global_config()",
        "EXEMPT_PATHS = config.auth_middleware.exempt_paths",
        "",
        "",
        "def is_exempt(path):"
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/extend_service_implementation/did_host/did_host_manager.py",
      "line": 35,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "            self.hostport = str(port)",
        "        else:",
        "            # ÂÖºÂÆπÊ®°ÂºèÔºö‰ΩøÁî®Áé∞ÊúâÈÄªËæë",
        "            config = get_global_config()",
        "            self.hosted_dir = Path(hosted_dir or config.anp_sdk.user_hosted_path)",
        "            self.hostdomain = os.environ.get('HOST_DID_DOMAIN', 'localhost')",
        "            self.hostport = os.environ.get('HOST_DID_PORT', '9527')"
      ],
      "function": "__init__",
      "class": "DIDHostManager"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/extend_service_implementation/did_host/did_host_manager.py",
      "line": 36,
      "type": "config_access",
      "config_key": "anp_sdk.user_hosted_path",
      "code": "self.hosted_dir = Path(hosted_dir or config.anp_sdk.user_hosted_path)",
      "context": [
        "        else:",
        "            # ÂÖºÂÆπÊ®°ÂºèÔºö‰ΩøÁî®Áé∞ÊúâÈÄªËæë",
        "            config = get_global_config()",
        "            self.hosted_dir = Path(hosted_dir or config.anp_sdk.user_hosted_path)",
        "            self.hostdomain = os.environ.get('HOST_DID_DOMAIN', 'localhost')",
        "            self.hostport = os.environ.get('HOST_DID_PORT', '9527')",
        "            "
      ],
      "function": "__init__",
      "class": "DIDHostManager"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 32,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        Dict[str, Any]: Â§ÑÁêÜÁªìÊûú",
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        ""
      ],
      "function": "process_group_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 100,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        Dict[str, Any]: Â§ÑÁêÜÁªìÊûú",
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        ""
      ],
      "function": "process_agent_api_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 200,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        Dict[str, Any]: Â§ÑÁêÜÁªìÊûú",
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        ""
      ],
      "function": "process_agent_message",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 33,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
      "context": [
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # Ê†πÊçÆÈÖçÁΩÆÂÜ≥ÂÆöÂ§ÑÁêÜÊñπÂºè"
      ],
      "function": "process_group_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 34,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
      "context": [
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # Ê†πÊçÆÈÖçÁΩÆÂÜ≥ÂÆöÂ§ÑÁêÜÊñπÂºè",
        "    if use_transformer_server:"
      ],
      "function": "process_group_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 67,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "                    else:",
        "                        error_text = await response.text()",
        "                        logger.error(f\"‚ùå Framework serverËøîÂõûÈîôËØØ: {response.status} - {error_text}\")",
        "                        if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                            return {\"status\": \"error\", \"message\": f\"Framework serverÈîôËØØ: {response.status}\"}",
        "        except Exception as e:",
        "            logger.error(f\"‚ùå ËΩ¨ÂèëÂà∞Framework serverÂ§±Ë¥•: {e}\")"
      ],
      "function": "process_group_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 71,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "                            return {\"status\": \"error\", \"message\": f\"Framework serverÈîôËØØ: {response.status}\"}",
        "        except Exception as e:",
        "            logger.error(f\"‚ùå ËΩ¨ÂèëÂà∞Framework serverÂ§±Ë¥•: {e}\")",
        "            if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                return {\"status\": \"error\", \"message\": f\"Framework serverËøûÊé•Â§±Ë¥•: {str(e)}\"}",
        "",
        "    # Êú¨Âú∞Â§ÑÁêÜ"
      ],
      "function": "process_group_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 101,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
      "context": [
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # ÊûÑÈÄ†ËØ∑Ê±ÇÊï∞ÊçÆ"
      ],
      "function": "process_agent_api_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 102,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
      "context": [
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # ÊûÑÈÄ†ËØ∑Ê±ÇÊï∞ÊçÆ",
        "    processed_data = {"
      ],
      "function": "process_agent_api_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 151,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "                        error_text = await response.text()",
        "                        logger.error(f\"‚ùå transformer serverËøîÂõûÈîôËØØ: {response.status} - {error_text}\")",
        "                        # Â§±Ë¥•Êó∂ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ",
        "                        if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                            return {\"status\": \"error\", \"message\": f\"transformer serverÈîôËØØ: {response.status}\",",
        "                                    \"details\": error_text}",
        "        except Exception as e:"
      ],
      "function": "process_agent_api_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 157,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "        except Exception as e:",
        "            logger.error(f\"‚ùå transformer serverÂ§±Ë¥•: {e}\")",
        "            # Â§±Ë¥•Êó∂ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ",
        "            if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                return {\"status\": \"error\", \"message\": f\"transformer serverËøûÊé•Â§±Ë¥•: {str(e)}\"}",
        "            logger.debug(\"‚ö†Ô∏è ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ\")",
        ""
      ],
      "function": "process_agent_api_request",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 201,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
      "context": [
        "    \"\"\"",
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # ÊûÑÈÄ†ËØ∑Ê±ÇÊï∞ÊçÆ"
      ],
      "function": "process_agent_message",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 202,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
      "context": [
        "    # Ëé∑ÂèñÈÖçÁΩÆ",
        "    config = get_global_config()",
        "    use_transformer_server = getattr(config.anp_sdk, \"use_transformer_server\", False)",
        "    transformer_server_url = getattr(config.anp_sdk, \"transformer_server_url\", \"http://localhost:9528\")",
        "",
        "    # ÊûÑÈÄ†ËØ∑Ê±ÇÊï∞ÊçÆ",
        "    processed_data = {"
      ],
      "function": "process_agent_message",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 250,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "                        error_text = await response.text()",
        "                        logger.error(f\"‚ùå transformer serverËøîÂõûÈîôËØØ: {response.status} - {error_text}\")",
        "                        # Â§±Ë¥•Êó∂ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ",
        "                        if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                            return {\"anp_result\": {\"status\": \"error\",",
        "                                                   \"message\": f\"transformer serverÈîôËØØ: {response.status}\"}}",
        "        except Exception as e:"
      ],
      "function": "process_agent_message",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
      "line": 256,
      "type": "config_access",
      "config_key": "anp_sdk",
      "code": "if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
      "context": [
        "        except Exception as e:",
        "            logger.error(f\"‚ùå transformer serverÂ§±Ë¥•: {e}\")",
        "            # Â§±Ë¥•Êó∂ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ",
        "            if not getattr(config.anp_sdk, \"fallback_to_local\", True):",
        "                return {\"anp_result\": {\"status\": \"error\", \"message\": f\"transformer serverËøûÊé•Â§±Ë¥•: {str(e)}\"}}",
        "            logger.debug(\"‚ö†Ô∏è ÂõûÈÄÄÂà∞Êú¨Âú∞Â§ÑÁêÜ\")",
        ""
      ],
      "function": "process_agent_message",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 188,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    def __init__(self, user_dir: Optional[str] = None):",
        "        if hasattr(self, '_initialized') and self._initialized:",
        "            return",
        "        config = get_global_config()",
        "        self._user_dir = user_dir or config.anp_sdk.user_did_path",
        "",
        "        # Êèê‰æõÂ§öÁßçÁ¥¢ÂºïÊñπÂºèÔºåÊèêÈ´òÊü•ËØ¢ÊïàÁéá"
      ],
      "function": "__init__",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 703,
      "type": "get_global_config",
      "code": "config=get_global_config()",
      "context": [
        "    if not all(field in user_iput for field in required_fields):",
        "        logger.error(\"Áº∫Â∞ëÂøÖÈúÄÁöÑÂèÇÊï∞Â≠óÊÆµ\")",
        "        return None",
        "    config=get_global_config()",
        "",
        "    userdid_filepath = config.anp_sdk.user_did_path",
        "    userdid_filepath = UnifiedConfig.resolve_path(userdid_filepath)"
      ],
      "function": "create_did_user",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 189,
      "type": "config_access",
      "config_key": "anp_sdk.user_did_path",
      "code": "self._user_dir = user_dir or config.anp_sdk.user_did_path",
      "context": [
        "        if hasattr(self, '_initialized') and self._initialized:",
        "            return",
        "        config = get_global_config()",
        "        self._user_dir = user_dir or config.anp_sdk.user_did_path",
        "",
        "        # Êèê‰æõÂ§öÁßçÁ¥¢ÂºïÊñπÂºèÔºåÊèêÈ´òÊü•ËØ¢ÊïàÁéá",
        "        self.users_by_did: Dict[str, LocalUserData] = {}"
      ],
      "function": "__init__",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 705,
      "type": "config_access",
      "config_key": "anp_sdk.user_did_path",
      "code": "userdid_filepath = config.anp_sdk.user_did_path",
      "context": [
        "        return None",
        "    config=get_global_config()",
        "",
        "    userdid_filepath = config.anp_sdk.user_did_path",
        "    userdid_filepath = UnifiedConfig.resolve_path(userdid_filepath)",
        "",
        ""
      ],
      "function": "create_did_user",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 244,
      "type": "config_access",
      "config_key": "anp_sdk.user_did_key_id",
      "code": "key_id = get_global_config().anp_sdk.user_did_key_id  # ‰ΩøÁî®ÈªòËÆ§ÂÄº‰Ωú‰∏∫ÂêéÂ§á",
      "context": [
        "",
        "                if not key_id:",
        "                    logger.warning(f\"Êó†Ê≥ïÂú® {folder_name} ÁöÑDIDÊñáÊ°£‰∏≠Á°ÆÂÆökey_id\")",
        "                    key_id = get_global_config().anp_sdk.user_did_key_id  # ‰ΩøÁî®ÈªòËÆ§ÂÄº‰Ωú‰∏∫ÂêéÂ§á",
        "",
        "                password_paths = {",
        "                    \"did_private_key_file_path\": os.path.join(user_folder_path, f\"{key_id}_private.pem\"),"
      ],
      "function": "load_all_users",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
      "line": 514,
      "type": "config_access",
      "config_key": "anp_sdk.user_did_key_id",
      "code": "key_id = get_global_config().anp_sdk.user_did_key_id",
      "context": [
        "            # ÊûÑÂª∫ÂØÜÈí•Ë∑ØÂæÑ",
        "            key_id = self.parse_key_id_from_did_doc(did_doc)",
        "            if not key_id:",
        "                key_id = get_global_config().anp_sdk.user_did_key_id",
        "",
        "            password_paths = {",
        "                \"did_private_key_file_path\": os.path.join(user_folder_path, f\"{key_id}_private.pem\"),"
      ],
      "function": "load_single_user",
      "class": "LocalUserDataManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user.py",
      "line": 77,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "            logger.debug(f\"üÜï ÁºìÂ≠òANPUserÂÆû‰æã (Áõ¥Êé•ÊûÑÈÄ†): {self.id}\")",
        "        else:",
        "            logger.debug(f\"üîÑ ANPUserÂÆû‰æãÂ∑≤Â≠òÂú®‰∫éÁºìÂ≠ò‰∏≠: {self.id}\")",
        "        config = get_global_config()",
        "        self.key_id = config.anp_sdk.user_did_key_id",
        "",
        "        self.did_document_path = self.user_data.did_doc_path"
      ],
      "function": "__init__",
      "class": "ANPUser"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/anp_user.py",
      "line": 78,
      "type": "config_access",
      "config_key": "anp_sdk.user_did_key_id",
      "code": "self.key_id = config.anp_sdk.user_did_key_id",
      "context": [
        "        else:",
        "            logger.debug(f\"üîÑ ANPUserÂÆû‰æãÂ∑≤Â≠òÂú®‰∫éÁºìÂ≠ò‰∏≠: {self.id}\")",
        "        config = get_global_config()",
        "        self.key_id = config.anp_sdk.user_did_key_id",
        "",
        "        self.did_document_path = self.user_data.did_doc_path",
        "        self.private_key_path = self.user_data.did_private_key_file_path"
      ],
      "function": "__init__",
      "class": "ANPUser"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
      "line": 69,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "        # Calculate time difference",
        "        time_diff = abs((current_time - request_time).total_seconds() / 60)",
        "",
        "        config = get_global_config()",
        "        nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
        "",
        "        # Verify timestamp is within valid period"
      ],
      "function": "verify_timestamp",
      "class": "AuthenticationContext"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
      "line": 311,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    Returns:",
        "        str: Encoded JWT token",
        "    \"\"\"",
        "    config = get_global_config()",
        "    token_expire_time = config.anp_sdk.token_expire_time",
        "",
        "    to_encode = data.copy()"
      ],
      "function": "create_access_token",
      "class": "AuthenticationContext"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
      "line": 70,
      "type": "config_access",
      "config_key": "anp_sdk.nonce_expire_minutes",
      "code": "nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
      "context": [
        "        time_diff = abs((current_time - request_time).total_seconds() / 60)",
        "",
        "        config = get_global_config()",
        "        nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
        "",
        "        # Verify timestamp is within valid period",
        "        if time_diff > nonce_expire_minutes:"
      ],
      "function": "verify_timestamp",
      "class": "AuthenticationContext"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
      "line": 312,
      "type": "config_access",
      "config_key": "anp_sdk.token_expire_time",
      "code": "token_expire_time = config.anp_sdk.token_expire_time",
      "context": [
        "        str: Encoded JWT token",
        "    \"\"\"",
        "    config = get_global_config()",
        "    token_expire_time = config.anp_sdk.token_expire_time",
        "",
        "    to_encode = data.copy()",
        "    expires = datetime.now(timezone.utc) + (timedelta(minutes=expires_delta) if expires_delta else timedelta(seconds=token_expire_time))"
      ],
      "function": "create_access_token",
      "class": "AuthenticationContext"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
      "line": 322,
      "type": "config_access",
      "config_key": "anp_sdk.jwt_algorithm",
      "code": "jwt_algorithm = config.anp_sdk.jwt_algorithm",
      "context": [
        "        logger.debug(\"Invalid JWT private key object provided\")",
        "        raise HTTPException(status_code=500, detail=\"Internal anp_servicepoint error during token generation\")",
        "",
        "    jwt_algorithm = config.anp_sdk.jwt_algorithm",
        "    # Create the JWT token using RS256 algorithm with private key",
        "    encoded_jwt = jwt.encode(",
        "        to_encode,"
      ],
      "function": "create_access_token",
      "class": "AuthenticationContext"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 37,
      "type": "get_global_config",
      "code": "self.config = get_global_config()",
      "context": [
        "    ",
        "    def __init__(self):",
        "        \"\"\"ÂàùÂßãÂåñDIDÊ†ºÂºèÁÆ°ÁêÜÂô®\"\"\"",
        "        self.config = get_global_config()",
        "        self.domain_manager = get_domain_manager()",
        "        self._format_cache = {}",
        "        "
      ],
      "function": "__init__",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 233,
      "type": "config_access",
      "config_key": "did_config.creatable_user_types",
      "code": "creatable_types = self.config.did_config.creatable_user_types",
      "context": [
        "            bool: ÊòØÂê¶ÂèØ‰ª•ÂàõÂª∫",
        "        \"\"\"",
        "        try:",
        "            creatable_types = self.config.did_config.creatable_user_types",
        "            return user_type in creatable_types",
        "        except AttributeError:",
        "            # ÈÖçÁΩÆ‰∏≠Ê≤°ÊúâÁõ∏ÂÖ≥ËÆæÁΩÆÔºåÈªòËÆ§Âè™ÂÖÅËÆ∏ÂàõÂª∫userÁ±ªÂûã"
      ],
      "function": "can_create_user_type",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 329,
      "type": "config_access",
      "config_key": "did_config.format_template",
      "code": "return self.config.did_config.format_template",
      "context": [
        "    def _get_format_template(self) -> str:",
        "        \"\"\"Ëé∑ÂèñDIDÊ†ºÂºèÊ®°Êùø\"\"\"",
        "        try:",
        "            return self.config.did_config.format_template",
        "        except AttributeError:",
        "            return \"did:{method}:{host}:{method}:{user_type}:{user_id}\"",
        "    "
      ],
      "function": "_get_format_template",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 336,
      "type": "config_access",
      "config_key": "did_config.method",
      "code": "return self.config.did_config.method",
      "context": [
        "    def _get_method(self) -> str:",
        "        \"\"\"Ëé∑ÂèñDIDÊñπÊ≥ïÂêç\"\"\"",
        "        try:",
        "            return self.config.did_config.method",
        "        except AttributeError:",
        "            return \"wba\"",
        "    "
      ],
      "function": "_get_method",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 360,
      "type": "config_access",
      "config_key": "did_config.user_types",
      "code": "user_types = self.config.did_config.user_types",
      "context": [
        "            List[str]: Áî®Êà∑Á±ªÂûãÂàóË°®",
        "        \"\"\"",
        "        try:",
        "            user_types = self.config.did_config.user_types",
        "            if hasattr(user_types, 'user'):",
        "                return [user_types.user, user_types.hostuser, user_types.test]",
        "            elif hasattr(user_types, 'values'):"
      ],
      "function": "get_supported_user_types",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
      "line": 390,
      "type": "config_access",
      "config_key": "did_config.creatable_user_types",
      "code": "return list(self.config.did_config.creatable_user_types)",
      "context": [
        "            List[str]: ÂèØÂàõÂª∫ÁöÑÁî®Êà∑Á±ªÂûãÂàóË°®",
        "        \"\"\"",
        "        try:",
        "            return list(self.config.did_config.creatable_user_types)",
        "        except AttributeError:",
        "            return [\"user\"]",
        "    "
      ],
      "function": "get_creatable_user_types",
      "class": "DidFormatManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/config/__init__.py",
      "line": 18,
      "type": "config_access",
      "config_key": "py",
      "code": "- Áªü‰∏ÄÈÖçÁΩÆÁÆ°ÁêÜÔºàunified_config.pyÔºâ",
      "context": [
        "\"\"\"ANP Open SDK ÈÖçÁΩÆÊ®°Âùó",
        "",
        "Êèê‰æõÁªü‰∏ÄÁöÑÈÖçÁΩÆÁÆ°ÁêÜÂäüËÉΩÔºåÊîØÊåÅÔºö",
        "- Áªü‰∏ÄÈÖçÁΩÆÁÆ°ÁêÜÔºàunified_config.pyÔºâ",
        "- Á±ªÂûãÊèêÁ§∫ÂíåÂçèËÆÆÔºàconfig_types.pyÔºâ",
        "- ÂêëÂêéÂÖºÂÆπÁöÑÂä®ÊÄÅÈÖçÁΩÆÔºàdynamic_config.pyÔºâ",
        ""
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/config/__init__.py",
      "line": 20,
      "type": "config_access",
      "config_key": "py",
      "code": "- ÂêëÂêéÂÖºÂÆπÁöÑÂä®ÊÄÅÈÖçÁΩÆÔºàdynamic_config.pyÔºâ",
      "context": [
        "Êèê‰æõÁªü‰∏ÄÁöÑÈÖçÁΩÆÁÆ°ÁêÜÂäüËÉΩÔºåÊîØÊåÅÔºö",
        "- Áªü‰∏ÄÈÖçÁΩÆÁÆ°ÁêÜÔºàunified_config.pyÔºâ",
        "- Á±ªÂûãÊèêÁ§∫ÂíåÂçèËÆÆÔºàconfig_types.pyÔºâ",
        "- ÂêëÂêéÂÖºÂÆπÁöÑÂä®ÊÄÅÈÖçÁΩÆÔºàdynamic_config.pyÔºâ",
        "",
        "\"\"\"",
        ""
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/config/unified_config.py",
      "line": 246,
      "type": "config_access",
      "config_key": "yaml",
      "code": "return self._app_root / \"unified_config.yaml\"",
      "context": [
        "        if config_file:",
        "            return Path(config_file).resolve()",
        "            # ÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑÂü∫‰∫é app_root",
        "        return self._app_root / \"unified_config.yaml\"",
        "",
        "",
        ""
      ],
      "function": "_resolve_config_file",
      "class": "UnifiedConfig"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/config/unified_config.py",
      "line": 306,
      "type": "config_access",
      "config_key": "get",
      "code": "separator = path_config.get('path_separator')",
      "context": [
        "        if path_str.startswith('[') and path_str.endswith(']'):",
        "            path_str = os.environ.get('PATH', '')",
        "        path_config = self._config_data.get('path_config', {})",
        "        separator = path_config.get('path_separator')",
        "        if not separator:",
        "            separator = ';' if os.name == 'nt' else ':'",
        "        paths = []"
      ],
      "function": "_process_path_list",
      "class": "UnifiedConfig"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/config/unified_config.py",
      "line": 467,
      "type": "config_access",
      "config_key": "default.yaml",
      "code": "default_config_path = self._app_root / 'unified_config.default.yaml'",
      "context": [
        "        return self._config_data.copy()",
        "",
        "    def _get_default_config(self) -> dict:",
        "        default_config_path = self._app_root / 'unified_config.default.yaml'",
        "        if not default_config_path.exists():",
        "            self.logger.warning(f\"ÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂ {default_config_path} ‰∏çÂ≠òÂú®„ÄÇÂ∞Ü‰ΩøÁî®Á©∫ÈÖçÁΩÆ„ÄÇ\")",
        "            return {}"
      ],
      "function": "_get_default_config",
      "class": "UnifiedConfig"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 209,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "                logger.debug(\"Failed to load JWT public key\")",
        "                raise HTTPException(status_code=500, detail=\"Internal anp_servicepoint error during token verification\")",
        "",
        "            config = get_global_config()",
        "            jwt_algorithm = config.anp_sdk.jwt_algorithm",
        "",
        "            # Decode and verify the token using the public key"
      ],
      "function": "_verify_bearer_token",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 261,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    \"\"\"",
        "    from datetime import datetime, timezone, timedelta",
        "    try:",
        "        config = get_global_config()",
        "        nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
        "    except Exception:",
        "        nonce_expire_minutes = 5"
      ],
      "function": "is_valid_server_nonce",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 283,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    logger.debug(f\"Nonce accepted and marked as used: {nonce}\")",
        "    return True",
        "async def _generate_wba_auth_response\t(did, is_two_way_auth, resp_did):",
        "    config = get_global_config()",
        "    expiration_time = config.anp_sdk.token_expire_time",
        "   # ÁîüÊàêËÆøÈóÆ‰ª§Áâå",
        "    resp_did_agent = ANPUser.from_did(resp_did)"
      ],
      "function": "_generate_wba_auth_response",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 210,
      "type": "config_access",
      "config_key": "anp_sdk.jwt_algorithm",
      "code": "jwt_algorithm = config.anp_sdk.jwt_algorithm",
      "context": [
        "                raise HTTPException(status_code=500, detail=\"Internal anp_servicepoint error during token verification\")",
        "",
        "            config = get_global_config()",
        "            jwt_algorithm = config.anp_sdk.jwt_algorithm",
        "",
        "            # Decode and verify the token using the public key",
        "            payload = jwt.decode("
      ],
      "function": "_verify_bearer_token",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 262,
      "type": "config_access",
      "config_key": "anp_sdk.nonce_expire_minutes",
      "code": "nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
      "context": [
        "    from datetime import datetime, timezone, timedelta",
        "    try:",
        "        config = get_global_config()",
        "        nonce_expire_minutes = config.anp_sdk.nonce_expire_minutes",
        "    except Exception:",
        "        nonce_expire_minutes = 5",
        ""
      ],
      "function": "is_valid_server_nonce",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
      "line": 284,
      "type": "config_access",
      "config_key": "anp_sdk.token_expire_time",
      "code": "expiration_time = config.anp_sdk.token_expire_time",
      "context": [
        "    return True",
        "async def _generate_wba_auth_response\t(did, is_two_way_auth, resp_did):",
        "    config = get_global_config()",
        "    expiration_time = config.anp_sdk.token_expire_time",
        "   # ÁîüÊàêËÆøÈóÆ‰ª§Áâå",
        "    resp_did_agent = ANPUser.from_did(resp_did)",
        "    access_token = create_access_token("
      ],
      "function": "_generate_wba_auth_response",
      "class": "unknown"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
      "line": 55,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    Args:",
        "        config: ‰∏Ä‰∏™Á¨¶Âêà UnifiedConfigProtocol ÂçèËÆÆÁöÑÂÆåÊï¥ÈÖçÁΩÆÂØπË±°„ÄÇ",
        "    \"\"\"",
        "    config = get_global_config()",
        "",
        "    global _is_logging_configured",
        "    if _is_logging_configured:"
      ],
      "function": "setup_logging",
      "class": "ColoredFormatter"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
      "line": 72,
      "type": "config_access",
      "config_key": "detail",
      "code": "log_file = getattr(log_config.detail, 'file', None)",
      "context": [
        "    if log_config:",
        "        log_level_str = getattr(log_config, 'log_level', 'INFO').upper()",
        "        if hasattr(log_config, 'detail'):",
        "            log_file = getattr(log_config.detail, 'file', None)",
        "            max_size_mb = getattr(log_config.detail, 'max_size', 10)",
        "",
        "    # Â∞ÜÂ≠óÁ¨¶‰∏≤Á∫ßÂà´ËΩ¨Êç¢‰∏∫ logging ÁöÑÊï¥Êï∞Á∫ßÂà´"
      ],
      "function": "setup_logging",
      "class": "ColoredFormatter"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
      "line": 73,
      "type": "config_access",
      "config_key": "detail",
      "code": "max_size_mb = getattr(log_config.detail, 'max_size', 10)",
      "context": [
        "        log_level_str = getattr(log_config, 'log_level', 'INFO').upper()",
        "        if hasattr(log_config, 'detail'):",
        "            log_file = getattr(log_config.detail, 'file', None)",
        "            max_size_mb = getattr(log_config.detail, 'max_size', 10)",
        "",
        "    # Â∞ÜÂ≠óÁ¨¶‰∏≤Á∫ßÂà´ËΩ¨Êç¢‰∏∫ logging ÁöÑÊï¥Êï∞Á∫ßÂà´",
        "    log_level = getattr(logging, log_level_str, logging.INFO)"
      ],
      "function": "setup_logging",
      "class": "ColoredFormatter"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
      "line": 98,
      "type": "config_access",
      "config_key": "resolve_path",
      "code": "log_file_path = config.resolve_path(log_file)",
      "context": [
        "    if log_file:",
        "        try:",
        "            # ‰ΩøÁî® config ÂØπË±°ÁöÑÊñπÊ≥ïÊù•Ëß£ÊûêË∑ØÂæÑÔºåËøôÊòØÊúÄÂÅ•Â£ÆÁöÑÊñπÂºè",
        "            log_file_path = config.resolve_path(log_file)",
        "",
        "            # Á°Æ‰øùÁõÆÂΩïÂ≠òÂú®Ôºå‰∏çÂÜç‰ΩøÁî® sudo",
        "            log_file_path.parent.mkdir(parents=True, exist_ok=True)"
      ],
      "function": "setup_logging",
      "class": "ColoredFormatter"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 35,
      "type": "get_global_config",
      "code": "self.config = get_global_config()",
      "context": [
        "    ",
        "    def __init__(self):",
        "        \"\"\"ÂàùÂßãÂåñÂüüÂêçÁÆ°ÁêÜÂô®\"\"\"",
        "        self.config = get_global_config()",
        "        self._supported_domains = None",
        "        self._domain_config_cache = {}",
        "        "
      ],
      "function": "__init__",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 44,
      "type": "config_access",
      "config_key": "did_config.hosts",
      "code": "hosts_config = self.config.did_config.hosts",
      "context": [
        "        \"\"\"Ëé∑ÂèñÊîØÊåÅÁöÑÂüüÂêçÂàóË°®\"\"\"",
        "        if self._supported_domains is None:",
        "            try:",
        "                hosts_config = self.config.did_config.hosts",
        "                ",
        "                # Â¶ÇÊûúÊòØConfigNodeÂØπË±°ÔºåÈúÄË¶ÅËΩ¨Êç¢‰∏∫Â≠óÂÖ∏",
        "                if hasattr(hosts_config, '_data'):"
      ],
      "function": "supported_domains",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 48,
      "type": "config_access",
      "config_key": "_data",
      "code": "self._supported_domains = hosts_config._data",
      "context": [
        "                ",
        "                # Â¶ÇÊûúÊòØConfigNodeÂØπË±°ÔºåÈúÄË¶ÅËΩ¨Êç¢‰∏∫Â≠óÂÖ∏",
        "                if hasattr(hosts_config, '_data'):",
        "                    self._supported_domains = hosts_config._data",
        "                elif hasattr(hosts_config, '__dict__'):",
        "                    # Â∞ùËØï‰ªéÂØπË±°Â±ûÊÄßÊûÑÂª∫Â≠óÂÖ∏",
        "                    self._supported_domains = {}"
      ],
      "function": "supported_domains",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 66,
      "type": "config_access",
      "config_key": "hosts",
      "code": "logger.warning(\"ÈÖçÁΩÆ‰∏≠Êú™ÊâæÂà∞did_config.hostsÔºå‰ΩøÁî®ÈªòËÆ§ÂüüÂêçÈÖçÁΩÆ\")",
      "context": [
        "                    ",
        "            except AttributeError:",
        "                # Â¶ÇÊûúÈÖçÁΩÆ‰∏≠Ê≤°Êúâdid_configÔºå‰ΩøÁî®ÈªòËÆ§ÂÄº",
        "                logger.warning(\"ÈÖçÁΩÆ‰∏≠Êú™ÊâæÂà∞did_config.hostsÔºå‰ΩøÁî®ÈªòËÆ§ÂüüÂêçÈÖçÁΩÆ\")",
        "                self._supported_domains = {",
        "                    \"localhost\": 9527,",
        "                    \"user.localhost\": 9527,"
      ],
      "function": "supported_domains",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 121,
      "type": "config_access",
      "config_key": "did_config.parsing.default_host",
      "code": "default_host = self.config.did_config.parsing.default_host",
      "context": [
        "    def _get_default_host_port(self) -> Tuple[str, int]:",
        "        \"\"\"Ëé∑ÂèñÈªòËÆ§ÁöÑ‰∏ªÊú∫ÂíåÁ´ØÂè£\"\"\"",
        "        try:",
        "            default_host = self.config.did_config.parsing.default_host",
        "            default_port = self.config.did_config.parsing.default_port",
        "            return default_host, default_port",
        "        except AttributeError:"
      ],
      "function": "_get_default_host_port",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 122,
      "type": "config_access",
      "config_key": "did_config.parsing.default_port",
      "code": "default_port = self.config.did_config.parsing.default_port",
      "context": [
        "        \"\"\"Ëé∑ÂèñÈªòËÆ§ÁöÑ‰∏ªÊú∫ÂíåÁ´ØÂè£\"\"\"",
        "        try:",
        "            default_host = self.config.did_config.parsing.default_host",
        "            default_port = self.config.did_config.parsing.default_port",
        "            return default_host, default_port",
        "        except AttributeError:",
        "            return \"localhost\", 9527"
      ],
      "function": "_get_default_host_port",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 211,
      "type": "config_access",
      "config_key": "unified_config",
      "code": "from anp_foundation.config.unified_config import UnifiedConfig",
      "context": [
        "        \"\"\"",
        "        try:",
        "            # ‰ΩøÁî®UnifiedConfigÁöÑÊ†áÂáÜË∑ØÂæÑËß£ÊûêÂäüËÉΩ",
        "            from anp_foundation.config.unified_config import UnifiedConfig",
        "            ",
        "            # ÊûÑÂª∫Áõ∏ÂØπ‰∫éAPP_ROOTÁöÑÊï∞ÊçÆË∑ØÂæÑ",
        "            data_path_template = f\"{{APP_ROOT}}/{self.get_data_path_for_domain(domain, port)}\""
      ],
      "function": "get_all_data_paths",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 321,
      "type": "config_access",
      "config_key": "did_config.insecure_patterns",
      "code": "insecure_patterns = self.config.did_config.insecure_patterns",
      "context": [
        "        ",
        "        # Ê£ÄÊü•ÊòØÂê¶ÊòØ‰∏çÂÆâÂÖ®ÁöÑÂüüÂêçÔºà‰ªÖÂú®ÈùûÁîü‰∫ßÁéØÂ¢ÉÂÖÅËÆ∏Ôºâ",
        "        try:",
        "            insecure_patterns = self.config.did_config.insecure_patterns",
        "            allow_insecure = self.config.did_config.parsing.allow_insecure",
        "            ",
        "            if not allow_insecure:"
      ],
      "function": "validate_domain_access",
      "class": "DomainManager"
    },
    {
      "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
      "line": 322,
      "type": "config_access",
      "config_key": "did_config.parsing.allow_insecure",
      "code": "allow_insecure = self.config.did_config.parsing.allow_insecure",
      "context": [
        "        # Ê£ÄÊü•ÊòØÂê¶ÊòØ‰∏çÂÆâÂÖ®ÁöÑÂüüÂêçÔºà‰ªÖÂú®ÈùûÁîü‰∫ßÁéØÂ¢ÉÂÖÅËÆ∏Ôºâ",
        "        try:",
        "            insecure_patterns = self.config.did_config.insecure_patterns",
        "            allow_insecure = self.config.did_config.parsing.allow_insecure",
        "            ",
        "            if not allow_insecure:",
        "                for pattern in insecure_patterns:"
      ],
      "function": "validate_domain_access",
      "class": "DomainManager"
    },
    {
      "file": "examples/flow_host_did/demo_complete_flow.py",
      "line": 22,
      "type": "config_access",
      "config_key": "unified_config",
      "code": "from anp_foundation.config.unified_config import UnifiedConfig, set_global_config",
      "context": [
        "",
        "from anp_foundation.anp_user import ANPUser",
        "from anp_server.baseline.anp_server_baseline import ANP_Server",
        "from anp_foundation.config.unified_config import UnifiedConfig, set_global_config",
        "from anp_foundation.anp_user_local_data import LocalUserDataManager",
        "from anp_foundation.domain import get_domain_manager",
        ""
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "examples/flow_host_did/demo_complete_flow.py",
      "line": 341,
      "type": "config_access",
      "config_key": "default.yaml",
      "code": "config_file = project_root / \"unified_config.default.yaml\"",
      "context": [
        "        print(\"‚öôÔ∏è ÂàùÂßãÂåñÈÖçÁΩÆ...\")",
        "        config_file = project_root / \"unified_config_framework_demo.yaml\"",
        "        if not config_file.exists():",
        "            config_file = project_root / \"unified_config.default.yaml\"",
        "        ",
        "        if config_file.exists():",
        "            config = UnifiedConfig(config_file=str(config_file), app_root=str(project_root))"
      ],
      "function": "main",
      "class": "HostedDIDDemo"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/routers/chat.py",
      "line": 27,
      "type": "config_access",
      "config_key": "secrets.openai_api_key",
      "code": "api_key = config.secrets.openai_api_key",
      "context": [
        "",
        "    # Get API key from environment variables via settings",
        "",
        "    api_key = config.secrets.openai_api_key",
        "    ",
        "    if not api_key:",
        "        raise HTTPException("
      ],
      "function": "chat_with_personal_agent",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/routers/chat.py",
      "line": 38,
      "type": "config_access",
      "config_key": "anp_user_service.api_base",
      "code": "apiBase=HttpUrl(f\"http://{config.anp_user_service.api_base}\"),  # ÂøÖÈ°ªÊòØ http(s):// ÂºÄÂ§¥ÁöÑÊúâÊïàURL",
      "context": [
        "    from pydantic import HttpUrl",
        "",
        "    llm_config = LLMConfig(",
        "        apiBase=HttpUrl(f\"http://{config.anp_user_service.api_base}\"),  # ÂøÖÈ°ªÊòØ http(s):// ÂºÄÂ§¥ÁöÑÊúâÊïàURL",
        "        apiKey=api_key,",
        "        model=config.anp_user_service.model_name",
        "    )"
      ],
      "function": "chat_with_personal_agent",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/routers/chat.py",
      "line": 40,
      "type": "config_access",
      "config_key": "anp_user_service.model_name",
      "code": "model=config.anp_user_service.model_name",
      "context": [
        "    llm_config = LLMConfig(",
        "        apiBase=HttpUrl(f\"http://{config.anp_user_service.api_base}\"),  # ÂøÖÈ°ªÊòØ http(s):// ÂºÄÂ§¥ÁöÑÊúâÊïàURL",
        "        apiKey=api_key,",
        "        model=config.anp_user_service.model_name",
        "    )",
        "",
        ""
      ],
      "function": "chat_with_personal_agent",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/core/config.py",
      "line": 9,
      "type": "config_access",
      "config_key": "dynamic_config",
      "code": "# This is a placeholder; you'll need to ensure anp_foundation.config.dynamic_config is loaded correctly.",
      "context": [
        "USERS_CREDENTIALS_FILE = BACKEND_BASE_DIR / \"users_credentials.json\"",
        "",
        "# ANP SDK related configurations - these might come from .env or anp_foundation's own config",
        "# This is a placeholder; you'll need to ensure anp_foundation.config.dynamic_config is loaded correctly.",
        "# For example, if anp_foundation relies on a .env file in the project root:",
        "from dotenv import load_dotenv",
        "load_dotenv(dotenv_path=BACKEND_BASE_DIR.parent / '.env') # Assumes .env is in mcp-chat-extension root"
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/core/config.py",
      "line": 16,
      "type": "config_access",
      "config_key": "legacy.dynamic_config",
      "code": "from anp_foundation.config.legacy.dynamic_config import dynamic_config",
      "context": [
        "",
        "# Attempt to import ANP SDK components. This relies on PYTHONPATH being set correctly.",
        "try:",
        "    from anp_foundation.config.legacy.dynamic_config import dynamic_config",
        "    ANP_USER_DID_PATH_KEY = 'anp_user_service.user_did_path' # The key used in your ANP SDK's config",
        "    # Example: ANP_USER_BASE_PATH = Path(dynamic_config.get(ANP_USER_DID_PATH_KEY))",
        "except ImportError:"
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/core/config.py",
      "line": 18,
      "type": "config_access",
      "config_key": "get",
      "code": "# Example: ANP_USER_BASE_PATH = Path(dynamic_config.get(ANP_USER_DID_PATH_KEY))",
      "context": [
        "try:",
        "    from anp_foundation.config.legacy.dynamic_config import dynamic_config",
        "    ANP_USER_DID_PATH_KEY = 'anp_user_service.user_did_path' # The key used in your ANP SDK's config",
        "    # Example: ANP_USER_BASE_PATH = Path(dynamic_config.get(ANP_USER_DID_PATH_KEY))",
        "except ImportError:",
        "    logger.debug(\"Warning: ANP SDK dynamic_config could not be imported. Paths may not be resolved correctly.\")",
        "    dynamic_config = None"
      ],
      "function": "unknown",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/core/config.py",
      "line": 27,
      "type": "config_access",
      "config_key": "get",
      "code": "path_str = dynamic_config.get(ANP_USER_DID_PATH_KEY)",
      "context": [
        "# This function tries to get the user base path from ANP SDK's dynamic config",
        "def get_anp_user_base_path() -> Path:",
        "    if dynamic_config:",
        "        path_str = dynamic_config.get(ANP_USER_DID_PATH_KEY)",
        "        if path_str:",
        "            return Path(path_str)",
        "    logger.debug(f\"Warning: Could not get '{ANP_USER_DID_PATH_KEY}' from dynamic_config. Using fallback.\")"
      ],
      "function": "get_anp_user_base_path",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/services/llm_service.py",
      "line": 38,
      "type": "config_access",
      "config_key": "apiKey",
      "code": "\"Authorization\": f\"Bearer {llm_config.apiKey}\"",
      "context": [
        "",
        "    headers = {",
        "        \"Content-Type\": \"application/json\",",
        "        \"Authorization\": f\"Bearer {llm_config.apiKey}\"",
        "    }",
        "    payload = {",
        "        \"model\": llm_config.model,"
      ],
      "function": "get_llm_response_with_rag",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/services/llm_service.py",
      "line": 41,
      "type": "config_access",
      "config_key": "model",
      "code": "\"model\": llm_config.model,",
      "context": [
        "        \"Authorization\": f\"Bearer {llm_config.apiKey}\"",
        "    }",
        "    payload = {",
        "        \"model\": llm_config.model,",
        "        \"messages\": [{\"role\": \"user\", \"content\": final_prompt}],",
        "        # Add other parameters like temperature, max_tokens if needed",
        "        # \"stream\": False # For simplicity, not using streaming here"
      ],
      "function": "get_llm_response_with_rag",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_user_portal/anp_user_service/app/services/llm_service.py",
      "line": 51,
      "type": "config_access",
      "config_key": "apiBase",
      "code": "str(llm_config.apiBase).rstrip('/') + \"/chat/completions\", # Common path",
      "context": [
        "        async with httpx.AsyncClient() as client:",
        "            logger.debug(f\"start llm{payload}\" )",
        "            response = await client.post(",
        "                str(llm_config.apiBase).rstrip('/') + \"/chat/completions\", # Common path",
        "                json=payload,",
        "                headers=headers,",
        "                timeout=60.0 # Increased timeout for LLM calls"
      ],
      "function": "get_llm_response_with_rag",
      "class": "unknown"
    },
    {
      "file": "examples/flow_anp_agent/flow_anp_agent.py",
      "line": 260,
      "type": "get_global_config",
      "code": "config = get_global_config()",
      "context": [
        "    logger.debug(\"üöÄ Starting Agent System Demo...\")",
        "    if os.getcwd() not in sys.path:",
        "        sys.path.append(os.getcwd())",
        "    config = get_global_config()",
        "",
        "    # Ê∏ÖÈô§‰πãÂâçÁöÑAgentÊ≥®ÂÜåËÆ∞ÂΩïÔºåÂàùÂßãÂåñË∑ØÁî±",
        "    AgentManager.clear_all_agents()"
      ],
      "function": "main",
      "class": "WeatherAgent"
    },
    {
      "file": "examples/flow_anp_agent/flow_anp_agent.py",
      "line": 303,
      "type": "config_access",
      "config_key": "anp_sdk.host",
      "code": "host = config.anp_sdk.host",
      "context": [
        "    # --- ÂêØÂä®SDK ---",
        "    logger.debug(\"\\n‚úÖ All agents created with new system. Creating SDK instance...\")",
        "    svr = ANP_Server()",
        "    host = config.anp_sdk.host",
        "    port = config.anp_sdk.port",
        "    logger.debug(f\"‚è≥ Á≠âÂæÖÊúçÂä°Âô®ÂêØÂä® {host}:{port} ...\")",
        "    await launch_anp_server(host, port,svr)"
      ],
      "function": "main",
      "class": "WeatherAgent"
    },
    {
      "file": "examples/flow_anp_agent/flow_anp_agent.py",
      "line": 304,
      "type": "config_access",
      "config_key": "anp_sdk.port",
      "code": "port = config.anp_sdk.port",
      "context": [
        "    logger.debug(\"\\n‚úÖ All agents created with new system. Creating SDK instance...\")",
        "    svr = ANP_Server()",
        "    host = config.anp_sdk.host",
        "    port = config.anp_sdk.port",
        "    logger.debug(f\"‚è≥ Á≠âÂæÖÊúçÂä°Âô®ÂêØÂä® {host}:{port} ...\")",
        "    await launch_anp_server(host, port,svr)",
        "    logger.debug(\"‚úÖ ÊúçÂä°Âô®Â∞±Áª™ÔºåÂºÄÂßãÊâßË°å‰ªªÂä°„ÄÇ\")"
      ],
      "function": "main",
      "class": "WeatherAgent"
    },
    {
      "file": "scripts/search_config_usage.py",
      "line": 73,
      "type": "config_access",
      "config_key": "add",
      "code": "self.files_with_config.add(str(relative_path))",
      "context": [
        "            }",
        "",
        "            self.config_usages.append(usage_info)",
        "            self.files_with_config.add(str(relative_path))",
        "",
        "        # ÊêúÁ¥¢ÈÖçÁΩÆÂ±ûÊÄßËÆøÈóÆ",
        "        for pattern in config_access_patterns:"
      ],
      "function": "_analyze_file",
      "class": "ConfigUsageAnalyzer"
    },
    {
      "file": "scripts/search_config_usage.py",
      "line": 95,
      "type": "config_access",
      "config_key": "add",
      "code": "self.files_with_config.add(str(relative_path))",
      "context": [
        "                }",
        "",
        "                self.config_usages.append(usage_info)",
        "                self.files_with_config.add(str(relative_path))",
        "",
        "    def _get_context(self, lines: List[str], line_idx: int, context_size: int = 3) -> List[str]:",
        "        \"\"\"Ëé∑Âèñ‰ª£Á†Å‰∏ä‰∏ãÊñá\"\"\""
      ],
      "function": "_analyze_file",
      "class": "ConfigUsageAnalyzer"
    },
    {
      "file": "scripts/search_config_usage.py",
      "line": 144,
      "type": "config_access",
      "config_key": "add",
      "code": "classes_with_config.add(usage['class'])",
      "context": [
        "",
        "            for usage in usages:",
        "                if usage['class'] != 'unknown':",
        "                    classes_with_config.add(usage['class'])",
        "                if usage['function'] != 'unknown':",
        "                    functions_with_config.add(usage['function'])",
        ""
      ],
      "function": "analyze_dependency_injection_opportunities",
      "class": "ConfigUsageAnalyzer"
    },
    {
      "file": "scripts/search_config_usage.py",
      "line": 146,
      "type": "config_access",
      "config_key": "add",
      "code": "functions_with_config.add(usage['function'])",
      "context": [
        "                if usage['class'] != 'unknown':",
        "                    classes_with_config.add(usage['class'])",
        "                if usage['function'] != 'unknown':",
        "                    functions_with_config.add(usage['function'])",
        "",
        "            if classes_with_config:",
        "                analysis['injection_opportunities'].append({"
      ],
      "function": "analyze_dependency_injection_opportunities",
      "class": "ConfigUsageAnalyzer"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 79,
      "type": "config_access",
      "config_key": "get",
      "code": "agent_name = config.get('name', 'Unknown')",
      "context": [
        "                    with open(mapping_file, 'r', encoding='utf-8') as f:",
        "                        config = yaml.safe_load(f)",
        "                    ",
        "                    agent_name = config.get('name', 'Unknown')",
        "                    agent_did = config.get('did', None)",
        "                    ",
        "                    # üÜï Â§ÑÁêÜÂÖ±‰∫´DIDÈÖçÁΩÆ"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 80,
      "type": "config_access",
      "config_key": "get",
      "code": "agent_did = config.get('did', None)",
      "context": [
        "                        config = yaml.safe_load(f)",
        "                    ",
        "                    agent_name = config.get('name', 'Unknown')",
        "                    agent_did = config.get('did', None)",
        "                    ",
        "                    # üÜï Â§ÑÁêÜÂÖ±‰∫´DIDÈÖçÁΩÆ",
        "                    share_did_config = config.get('share_did', {})"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 83,
      "type": "config_access",
      "config_key": "get",
      "code": "share_did_config = config.get('share_did', {})",
      "context": [
        "                    agent_did = config.get('did', None)",
        "                    ",
        "                    # üÜï Â§ÑÁêÜÂÖ±‰∫´DIDÈÖçÁΩÆ",
        "                    share_did_config = config.get('share_did', {})",
        "                    shared_did = None",
        "                    if share_did_config.get('enabled'):",
        "                        shared_did = share_did_config.get('shared_did')"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 85,
      "type": "config_access",
      "config_key": "get",
      "code": "if share_did_config.get('enabled'):",
      "context": [
        "                    # üÜï Â§ÑÁêÜÂÖ±‰∫´DIDÈÖçÁΩÆ",
        "                    share_did_config = config.get('share_did', {})",
        "                    shared_did = None",
        "                    if share_did_config.get('enabled'):",
        "                        shared_did = share_did_config.get('shared_did')",
        "                    ",
        "                    self.agent_mappings[str(mapping_file)] = {"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 86,
      "type": "config_access",
      "config_key": "get",
      "code": "shared_did = share_did_config.get('shared_did')",
      "context": [
        "                    share_did_config = config.get('share_did', {})",
        "                    shared_did = None",
        "                    if share_did_config.get('enabled'):",
        "                        shared_did = share_did_config.get('shared_did')",
        "                    ",
        "                    self.agent_mappings[str(mapping_file)] = {",
        "                        'config': config,"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 105,
      "type": "config_access",
      "config_key": "get",
      "code": "'path_prefix': share_did_config.get('path_prefix', ''),",
      "context": [
        "                            self.shared_did_configs[shared_did] = []",
        "                        self.shared_did_configs[shared_did].append({",
        "                            'agent_name': agent_name,",
        "                            'path_prefix': share_did_config.get('path_prefix', ''),",
        "                            'file_path': mapping_file,",
        "                            'api_paths': [api.get('path', '') for api in config.get('api', [])]",
        "                        })"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    },
    {
      "file": "scripts/agent_user_binding.py",
      "line": 107,
      "type": "config_access",
      "config_key": "get",
      "code": "'api_paths': [api.get('path', '') for api in config.get('api', [])]",
      "context": [
        "                            'agent_name': agent_name,",
        "                            'path_prefix': share_did_config.get('path_prefix', ''),",
        "                            'file_path': mapping_file,",
        "                            'api_paths': [api.get('path', '') for api in config.get('api', [])]",
        "                        })",
        "                    ",
        "                except Exception as e:"
      ],
      "function": "load_agent_mappings",
      "class": "AgentUserBindingManager"
    }
  ],
  "dependency_injection_analysis": {
    "total_usages": 110,
    "files_count": 24,
    "config_keys_used": [
      "_data",
      "add",
      "agent_002.agent_register",
      "anp_sdk",
      "anp_sdk.debug_mode",
      "anp_sdk.host",
      "anp_sdk.jwt_algorithm",
      "anp_sdk.nonce_expire_minutes",
      "anp_sdk.port",
      "anp_sdk.token_expire_time",
      "anp_sdk.user_did_key_id",
      "anp_sdk.user_did_path",
      "anp_sdk.user_hosted_path",
      "anp_user_service.api_base",
      "anp_user_service.model_name",
      "apiBase",
      "apiKey",
      "auth_middleware.exempt_paths",
      "default.yaml",
      "detail",
      "did_config.creatable_user_types",
      "did_config.format_template",
      "did_config.hosts",
      "did_config.insecure_patterns",
      "did_config.method",
      "did_config.parsing.allow_insecure",
      "did_config.parsing.default_host",
      "did_config.parsing.default_port",
      "did_config.user_types",
      "dynamic_config",
      "get",
      "hosts",
      "legacy.dynamic_config",
      "llm.api_url",
      "model",
      "py",
      "resolve_path",
      "secrets.openai_api_key",
      "unified_config",
      "yaml"
    ],
    "injection_opportunities": [
      {
        "file": "data_user/localhost_9527/agents_config/agent_llm/agent_handlers.py",
        "type": "function_parameter_injection",
        "functions": [
          "initialize_agent"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ initialize_agent ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "data_user/localhost_9527/agents_config/orchestrator_agent/agent_handlers.py",
        "type": "function_parameter_injection",
        "functions": [
          "run_agent_002_demo_new"
        ],
        "usage_count": 1,
        "suggestion": "‰∏∫ run_agent_002_demo_new ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
        "type": "class_constructor_injection",
        "classes": [
          "AgentRouter",
          "LocalAgentManager"
        ],
        "usage_count": 8,
        "suggestion": "‰∏∫ AgentRouter, LocalAgentManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_runtime/agent_manager.py",
        "type": "function_parameter_injection",
        "functions": [
          "load_agent_from_module",
          "_register_message_handlers_new",
          "_resolve_shared_did"
        ],
        "usage_count": 8,
        "suggestion": "‰∏∫ load_agent_from_module, _register_message_handlers_new, _resolve_shared_did ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
        "type": "class_constructor_injection",
        "classes": [
          "ANP_Server"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ ANP_Server Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_server/run_lite_server_template.py",
        "type": "function_parameter_injection",
        "functions": [
          "__init__",
          "start_server"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ __init__, start_server ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
        "type": "class_constructor_injection",
        "classes": [
          "ANP_Server"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ ANP_Server Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_server/baseline/anp_server_baseline.py",
        "type": "function_parameter_injection",
        "functions": [
          "__init__",
          "start_server"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ __init__, start_server ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_servicepoint/extend_service_implementation/did_host/did_host_manager.py",
        "type": "class_constructor_injection",
        "classes": [
          "DIDHostManager"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ DIDHostManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_servicepoint/extend_service_implementation/did_host/did_host_manager.py",
        "type": "function_parameter_injection",
        "functions": [
          "__init__"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ __init__ ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py",
        "type": "function_parameter_injection",
        "functions": [
          "process_agent_api_request",
          "process_group_request",
          "process_agent_message"
        ],
        "usage_count": 15,
        "suggestion": "‰∏∫ process_agent_api_request, process_group_request, process_agent_message ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
        "type": "class_constructor_injection",
        "classes": [
          "LocalUserDataManager"
        ],
        "usage_count": 6,
        "suggestion": "‰∏∫ LocalUserDataManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/anp_user_local_data.py",
        "type": "function_parameter_injection",
        "functions": [
          "__init__",
          "load_single_user",
          "load_all_users",
          "create_did_user"
        ],
        "usage_count": 6,
        "suggestion": "‰∏∫ __init__, load_single_user, load_all_users, create_did_user ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/anp_user.py",
        "type": "class_constructor_injection",
        "classes": [
          "ANPUser"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ ANPUser Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/anp_user.py",
        "type": "function_parameter_injection",
        "functions": [
          "__init__"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ __init__ ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
        "type": "class_constructor_injection",
        "classes": [
          "AuthenticationContext"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ AuthenticationContext Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/did/did_tool.py",
        "type": "function_parameter_injection",
        "functions": [
          "verify_timestamp",
          "create_access_token"
        ],
        "usage_count": 5,
        "suggestion": "‰∏∫ verify_timestamp, create_access_token ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
        "type": "class_constructor_injection",
        "classes": [
          "DidFormatManager"
        ],
        "usage_count": 6,
        "suggestion": "‰∏∫ DidFormatManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/did/did_format_manager.py",
        "type": "function_parameter_injection",
        "functions": [
          "get_creatable_user_types",
          "_get_format_template",
          "__init__",
          "get_supported_user_types",
          "_get_method",
          "can_create_user_type"
        ],
        "usage_count": 6,
        "suggestion": "‰∏∫ get_creatable_user_types, _get_format_template, __init__, get_supported_user_types, _get_method, can_create_user_type ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/config/unified_config.py",
        "type": "class_constructor_injection",
        "classes": [
          "UnifiedConfig"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ UnifiedConfig Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/config/unified_config.py",
        "type": "function_parameter_injection",
        "functions": [
          "_process_path_list",
          "_get_default_config",
          "_resolve_config_file"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ _process_path_list, _get_default_config, _resolve_config_file ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/auth/auth_verifier.py",
        "type": "function_parameter_injection",
        "functions": [
          "_verify_bearer_token",
          "is_valid_server_nonce",
          "_generate_wba_auth_response"
        ],
        "usage_count": 6,
        "suggestion": "‰∏∫ _verify_bearer_token, is_valid_server_nonce, _generate_wba_auth_response ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
        "type": "class_constructor_injection",
        "classes": [
          "ColoredFormatter"
        ],
        "usage_count": 4,
        "suggestion": "‰∏∫ ColoredFormatter Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/utils/log_base.py",
        "type": "function_parameter_injection",
        "functions": [
          "setup_logging"
        ],
        "usage_count": 4,
        "suggestion": "‰∏∫ setup_logging ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
        "type": "class_constructor_injection",
        "classes": [
          "DomainManager"
        ],
        "usage_count": 9,
        "suggestion": "‰∏∫ DomainManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "anp-open-sdk-python/anp_foundation/domain/domain_manager.py",
        "type": "function_parameter_injection",
        "functions": [
          "validate_domain_access",
          "_get_default_host_port",
          "__init__",
          "get_all_data_paths",
          "supported_domains"
        ],
        "usage_count": 9,
        "suggestion": "‰∏∫ validate_domain_access, _get_default_host_port, __init__, get_all_data_paths, supported_domains ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "examples/flow_host_did/demo_complete_flow.py",
        "type": "class_constructor_injection",
        "classes": [
          "HostedDIDDemo"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ HostedDIDDemo Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "examples/flow_host_did/demo_complete_flow.py",
        "type": "function_parameter_injection",
        "functions": [
          "main"
        ],
        "usage_count": 2,
        "suggestion": "‰∏∫ main ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "examples/flow_anp_user_portal/anp_user_service/app/routers/chat.py",
        "type": "function_parameter_injection",
        "functions": [
          "chat_with_personal_agent"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ chat_with_personal_agent ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "examples/flow_anp_user_portal/anp_user_service/app/core/config.py",
        "type": "function_parameter_injection",
        "functions": [
          "get_anp_user_base_path"
        ],
        "usage_count": 4,
        "suggestion": "‰∏∫ get_anp_user_base_path ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "examples/flow_anp_user_portal/anp_user_service/app/services/llm_service.py",
        "type": "function_parameter_injection",
        "functions": [
          "get_llm_response_with_rag"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ get_llm_response_with_rag ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "examples/flow_anp_agent/flow_anp_agent.py",
        "type": "class_constructor_injection",
        "classes": [
          "WeatherAgent"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ WeatherAgent Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "examples/flow_anp_agent/flow_anp_agent.py",
        "type": "function_parameter_injection",
        "functions": [
          "main"
        ],
        "usage_count": 3,
        "suggestion": "‰∏∫ main ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "scripts/search_config_usage.py",
        "type": "class_constructor_injection",
        "classes": [
          "ConfigUsageAnalyzer"
        ],
        "usage_count": 4,
        "suggestion": "‰∏∫ ConfigUsageAnalyzer Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "scripts/search_config_usage.py",
        "type": "function_parameter_injection",
        "functions": [
          "analyze_dependency_injection_opportunities",
          "_analyze_file"
        ],
        "usage_count": 4,
        "suggestion": "‰∏∫ analyze_dependency_injection_opportunities, _analyze_file ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      },
      {
        "file": "scripts/agent_user_binding.py",
        "type": "class_constructor_injection",
        "classes": [
          "AgentUserBindingManager"
        ],
        "usage_count": 7,
        "suggestion": "‰∏∫ AgentUserBindingManager Á±ªÊ∑ªÂä† config ÂèÇÊï∞Âà∞ÊûÑÈÄ†ÂáΩÊï∞"
      },
      {
        "file": "scripts/agent_user_binding.py",
        "type": "function_parameter_injection",
        "functions": [
          "load_agent_mappings"
        ],
        "usage_count": 7,
        "suggestion": "‰∏∫ load_agent_mappings ÂáΩÊï∞Ê∑ªÂä† config ÂèÇÊï∞"
      }
    ],
    "refactor_suggestions": []
  },
  "config_usage_patterns": {
    "used_sections": {
      "root": [
        "_data",
        "add",
        "anp_sdk",
        "apiBase",
        "apiKey",
        "detail",
        "dynamic_config",
        "get",
        "hosts",
        "model",
        "py",
        "resolve_path",
        "unified_config",
        "yaml"
      ],
      "anp_sdk": [
        "anp_sdk.debug_mode",
        "anp_sdk.host",
        "anp_sdk.jwt_algorithm",
        "anp_sdk.nonce_expire_minutes",
        "anp_sdk.port",
        "anp_sdk.token_expire_time",
        "anp_sdk.user_did_key_id",
        "anp_sdk.user_did_path",
        "anp_sdk.user_hosted_path"
      ],
      "did_config": [
        "did_config.creatable_user_types",
        "did_config.format_template",
        "did_config.hosts",
        "did_config.insecure_patterns",
        "did_config.method",
        "did_config.parsing.allow_insecure",
        "did_config.parsing.default_host",
        "did_config.parsing.default_port",
        "did_config.user_types"
      ],
      "llm": [
        "llm.api_url"
      ],
      "secrets": [
        "secrets.openai_api_key"
      ],
      "anp_user_service": [
        "anp_user_service.api_base",
        "anp_user_service.model_name"
      ],
      "default": [
        "default.yaml"
      ],
      "agent_002": [
        "agent_002.agent_register"
      ],
      "legacy": [
        "legacy.dynamic_config"
      ],
      "auth_middleware": [
        "auth_middleware.exempt_paths"
      ]
    },
    "unused_sections_suggestion": [
      "env_mapping",
      "env_types",
      "log_settings",
      "mail",
      "multi_agent_mode",
      "path_config"
    ],
    "optimization_suggestions": [
      "È´òÈ¢ë‰ΩøÁî®ÈÖçÁΩÆÁöÑÊñá‰ª∂ (7 ‰∏™) Âª∫ËÆÆ‰ºòÂÖàËøõË°å‰æùËµñÊ≥®ÂÖ•ÊîπÈÄ†: anp-open-sdk-python/anp_runtime/agent_manager.py, anp-open-sdk-python/anp_servicepoint/core_service_handler/agent_service_handler.py, anp-open-sdk-python/anp_foundation/anp_user_local_data.py..."
    ]
  },
  "refactor_recommendations": [
    {
      "type": "constructor_injection",
      "target": "LocalAgentManager",
      "priority": "high",
      "description": "Á±ª LocalAgentManager ‰∏≠‰ΩøÁî®‰∫Ü 7 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass LocalAgentManager:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "ANP_Server",
      "priority": "high",
      "description": "Á±ª ANP_Server ‰∏≠‰ΩøÁî®‰∫Ü 10 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass ANP_Server:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "LocalUserDataManager",
      "priority": "high",
      "description": "Á±ª LocalUserDataManager ‰∏≠‰ΩøÁî®‰∫Ü 6 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass LocalUserDataManager:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "AuthenticationContext",
      "priority": "high",
      "description": "Á±ª AuthenticationContext ‰∏≠‰ΩøÁî®‰∫Ü 5 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass AuthenticationContext:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "DidFormatManager",
      "priority": "high",
      "description": "Á±ª DidFormatManager ‰∏≠‰ΩøÁî®‰∫Ü 6 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass DidFormatManager:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "UnifiedConfig",
      "priority": "high",
      "description": "Á±ª UnifiedConfig ‰∏≠‰ΩøÁî®‰∫Ü 3 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass UnifiedConfig:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "ColoredFormatter",
      "priority": "high",
      "description": "Á±ª ColoredFormatter ‰∏≠‰ΩøÁî®‰∫Ü 4 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass ColoredFormatter:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "DomainManager",
      "priority": "high",
      "description": "Á±ª DomainManager ‰∏≠‰ΩøÁî®‰∫Ü 9 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass DomainManager:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "WeatherAgent",
      "priority": "high",
      "description": "Á±ª WeatherAgent ‰∏≠‰ΩøÁî®‰∫Ü 3 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass WeatherAgent:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "ConfigUsageAnalyzer",
      "priority": "high",
      "description": "Á±ª ConfigUsageAnalyzer ‰∏≠‰ΩøÁî®‰∫Ü 4 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass ConfigUsageAnalyzer:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "constructor_injection",
      "target": "AgentUserBindingManager",
      "priority": "high",
      "description": "Á±ª AgentUserBindingManager ‰∏≠‰ΩøÁî®‰∫Ü 7 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•",
      "example_code": "\nclass AgentUserBindingManager:\n    def __init__(self, config: Optional[UnifiedConfig] = None):\n        self.config = config or get_global_config()\n        # ... rest of init ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "initialize_agent",
      "priority": "medium",
      "description": "ÂáΩÊï∞ initialize_agent ‰∏≠‰ΩøÁî®‰∫Ü 3 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef initialize_agent(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "process_group_request",
      "priority": "medium",
      "description": "ÂáΩÊï∞ process_group_request ‰∏≠‰ΩøÁî®‰∫Ü 5 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef process_group_request(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "process_agent_api_request",
      "priority": "medium",
      "description": "ÂáΩÊï∞ process_agent_api_request ‰∏≠‰ΩøÁî®‰∫Ü 5 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef process_agent_api_request(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "process_agent_message",
      "priority": "medium",
      "description": "ÂáΩÊï∞ process_agent_message ‰∏≠‰ΩøÁî®‰∫Ü 5 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef process_agent_message(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "_verify_bearer_token",
      "priority": "medium",
      "description": "ÂáΩÊï∞ _verify_bearer_token ‰∏≠‰ΩøÁî®‰∫Ü 2 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef _verify_bearer_token(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "is_valid_server_nonce",
      "priority": "medium",
      "description": "ÂáΩÊï∞ is_valid_server_nonce ‰∏≠‰ΩøÁî®‰∫Ü 2 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef is_valid_server_nonce(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "_generate_wba_auth_response",
      "priority": "medium",
      "description": "ÂáΩÊï∞ _generate_wba_auth_response ‰∏≠‰ΩøÁî®‰∫Ü 2 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef _generate_wba_auth_response(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "chat_with_personal_agent",
      "priority": "medium",
      "description": "ÂáΩÊï∞ chat_with_personal_agent ‰∏≠‰ΩøÁî®‰∫Ü 3 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef chat_with_personal_agent(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    },
    {
      "type": "function_parameter_injection",
      "target": "get_llm_response_with_rag",
      "priority": "medium",
      "description": "ÂáΩÊï∞ get_llm_response_with_rag ‰∏≠‰ΩøÁî®‰∫Ü 3 Ê¨°ÈÖçÁΩÆÔºåÂª∫ËÆÆÊ∑ªÂä†ÈÖçÁΩÆÂèÇÊï∞",
      "example_code": "\ndef get_llm_response_with_rag(..., config: Optional[UnifiedConfig] = None):\n    config = config or get_global_config()\n    # ... rest of function ...\n"
    }
  ]
}